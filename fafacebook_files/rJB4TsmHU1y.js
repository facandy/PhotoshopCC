/*!CK:436296271!*//*1446763616,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["eXpUq"]); }

__d('ReactComposerPhotoUploader',['ReactComposerLoggingStore','ReactComposerMediaConfig','ReactComposerPhotoActions','ReactComposerPhotoUploadActions','ReactComposerPhotoUploadStore','ActorURI','AsyncUploadRequest','FaceRecognitionController','JpegResizer','Map','XComposerPhotoUploader','performanceNow'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();function t(u,v,w){this.$ReactComposerPhotoUploader1=u.composerID;this.$ReactComposerPhotoUploader2=w;var x=i.photo,y=null;if(p.isSupported()){y=p.getSingleton(v>1?p.DEFAULT_POOL_SIZE:1);y.setHighQuality(x.highQuality);}else k.resizerUnavailable(this.$ReactComposerPhotoUploader1);var z=m.create(x.uploadEndpoint,u.actorID);this.$ReactComposerPhotoUploader3=new r({uploadEndpoint:z,uploadData:Object.assign({qn:h.getSessionID(this.$ReactComposerPhotoUploader1),target_id:u.targetID},x.uploadData),retryLimit:x.retryLimit,concurrentLimit:x.concurrentLimit,resizer:y,onUploadEnqueued:this.$ReactComposerPhotoUploader4.bind(this),onResizeStart:this.$ReactComposerPhotoUploader5.bind(this),onResizeSuccess:this.$ReactComposerPhotoUploader6.bind(this),onResizeFailure:this.$ReactComposerPhotoUploader7.bind(this),onResizeProgress:this.$ReactComposerPhotoUploader8.bind(this),onUploadStart:this.$ReactComposerPhotoUploader9.bind(this),onUploadProgress:this.$ReactComposerPhotoUploader10.bind(this),onUploadSuccess:this.$ReactComposerPhotoUploader11.bind(this),onUploadFailure:this.$ReactComposerPhotoUploader12.bind(this)});this.$ReactComposerPhotoUploader13=new o({include_unrecognized_faceboxes:true,include_low_confidence_recognitions:true,include_face_crop_src:true});this.$ReactComposerPhotoUploader13.subscribe('photo',this.$ReactComposerPhotoUploader14.bind(this)),this.$ReactComposerPhotoUploader13.subscribe('done',this.$ReactComposerPhotoUploader15.bind(this));this.$ReactComposerPhotoUploader16=new q();}t.prototype.upload=function(u){this.$ReactComposerPhotoUploader3.upload(u);};t.prototype.retry=function(u){var v=this.$ReactComposerPhotoUploader3.getAsyncUploadRequest([u]);v.send();};t.prototype.getAsyncUploadRequest=function(u,v){return this.$ReactComposerPhotoUploader3.getAsyncUploadRequest(u,v);};t.prototype.enqueueAsyncUploadRequest=function(u,v,w){v.forEach(function(x){var y=w.indexMap?w.indexMap.get(x.uploadID):l.getUploads(u).size;k.enqueue(u,x.uploadID,x.filename,y);});this.getAsyncUploadRequest(v,w).send();};t.prototype.isUploadLimitExceeded=function(u,v){var w=this.getMaxSelectableFilesCount(u),x=!v||!n.isSupported()?1:v.length;return x>w;};t.prototype.getMaxSelectableFilesCount=function(u){return !!u?i.photo.limit:1;};t.prototype.$ReactComposerPhotoUploader4=function(u){k.enqueue(this.$ReactComposerPhotoUploader1,u.uploadID,u.fileName,l.getUploads(this.$ReactComposerPhotoUploader1).size);};t.prototype.$ReactComposerPhotoUploader5=function(u){k.startResizing(this.$ReactComposerPhotoUploader1,u.uploadID,{bytes:u.size});};t.prototype.$ReactComposerPhotoUploader8=function(u,event){setTimeout((function(){return k.progressResizing(this.$ReactComposerPhotoUploader1,u,100*event.written/event.total);}).bind(this),0);};t.prototype.$ReactComposerPhotoUploader6=function(u,v,w,x){k.doneResizing(this.$ReactComposerPhotoUploader1,u.uploadID,{dt:x,media_data_size:u.size,bytes:v.size,custom_tags:{skipped_resizing:w}});};t.prototype.$ReactComposerPhotoUploader7=function(u,v,w,x){k.failResizing(this.$ReactComposerPhotoUploader1,u.uploadID,{dt:x,bytes:u.size,error_code:w.code,error_info:w.message});};t.prototype.$ReactComposerPhotoUploader9=function(u,v){k.startUploading(this.$ReactComposerPhotoUploader1,u,v.upload);this.$ReactComposerPhotoUploader16.set(u,s());};t.prototype.$ReactComposerPhotoUploader10=function(u,v){setTimeout((function(){return k.progressUploading(this.$ReactComposerPhotoUploader1,u,100*v.event.loaded/v.event.total);}).bind(this),0);};t.prototype.$ReactComposerPhotoUploader11=function(u,v){if(l.getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader1,u))return;var w=v.response.payload;k.doneUploading(this.$ReactComposerPhotoUploader1,u,v.upload,s()-this.$ReactComposerPhotoUploader16.get(u),w.photoID,w.thumbSrc,w.originalPhotoID,w.mediaLocation);if(!this.$ReactComposerPhotoUploader2.disableFaceRecognition){j.startRecognizing(this.$ReactComposerPhotoUploader1,w.photoID);this.$ReactComposerPhotoUploader13.start([w.photoID]);}};t.prototype.$ReactComposerPhotoUploader12=function(u,v,w){if(l.getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader1,u))return;var x=v.response,y={code:x.getError(),description:x.getErrorDescription(),summary:x.getErrorSummary(),transient:x.isTransient()||x.getError()==1004||x.getError()==1006};k.failUploading(this.$ReactComposerPhotoUploader1,u,v.upload,s()-this.$ReactComposerPhotoUploader16.get(u),y);};t.prototype.$ReactComposerPhotoUploader14=function(u,v){v.faceboxes.forEach((function(w){var x;if(w.recognitions.length>0){var y=w.recognitions[0].user;x={subjectID:y.fbid,value:y.name};}j.addFacebox(this.$ReactComposerPhotoUploader1,v.photo,{id:w.fbid,x:w.x,y:w.y,top:w.top,left:w.left,width:w.width,height:w.height,croppedURI:w.src,bestRecognition:x,allRecognitions:w.allRecognitions});}).bind(this));j.finishRecognizingPhoto(this.$ReactComposerPhotoUploader1,v.photo);};t.prototype.$ReactComposerPhotoUploader15=function(u,v){j.finishRecognizing(this.$ReactComposerPhotoUploader1,v.unresolved);};f.exports=t;},null);
__d('ReactComposerScrapedAttachmentPhotoDropWarningDialog.react',['LayerHideOnEscape','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=j.PropTypes,t=j.createClass({displayName:'ReactComposerScrapedAttachmentPhotoDropWarningDialog',mixins:[i,k],propTypes:{shown:s.bool,onConfirm:s.func,onCancel:s.func},componentDidMount:function(){this.refs.dialog.layer.subscribe('hide',this._onHide);},renderLayers:function(){return {dialog:j.createElement(m,{ref:'dialog',shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:h}},j.createElement(p,null,j.createElement(q,null,r._("Remove Link Preview"))),j.createElement(n,null,r._("Uploading a photo will remove the link preview. Do you want to continue?")),j.createElement(o,null,j.createElement(l,{use:'confirm',onClick:this.props.onConfirm,label:r._("Upload Photo")}),j.createElement(l,{onClick:this.props.onCancel,label:r._("Cancel")})))};},render:function(){return null;},_onHide:function(){this.props.onCancel&&this.props.onCancel();},_onCancel:function(){this.props.onCancel&&this.props.onCancel();}});f.exports=t;},null);
__d('ReactComposerDragDropPromptContainer.react',['ReactComposerAttachmentType','ReactComposerConfig','ReactComposerDragDropPromptLazy.react','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','ReactComposerScrapedAttachmentPhotoDropWarningDialog.react','ReactComposerStatusUtils','ReactComposerVideoUploadStore','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=s.PropTypes,v=s.createClass({displayName:'ReactComposerDragDropPromptContainer',_uploader:undefined,mixins:[r,t,l(q)],propTypes:{root:u.object.isRequired,config:i.isRequired},statics:{calculateState:function(w,x,y){return {enabled:!q.getVideo(w)};}},getAttachmentInitialState:function(w,x){return {photoDropWarningShown:false,pendingFiles:null};},componentWillMount:function(){var w=this.props.config.attachmentsConfig[h.STATUS],x=this.props.config.attachmentsConfig[h.MEDIA];this._uploader=new k(this.context,x.photoLimit,{disableFaceRecognition:x.disableFaceboxTagger});m.enabled(this.context.composerID,w.canScrapeShare);},renderLayers:function(){return {photoDropWarningDialog:s.createElement(o,{shown:this.state.photoDropWarningShown,onCancel:this._onPhotoDropWarningCancel,onConfirm:this._onPhotoDropWarningConfirm})};},render:function(){if(!this.state.enabled)return null;return (s.createElement(j,{root:this.props.root,onFilesDrop:this._onFilesDrop,onURLDrop:this._onURLDrop}));},_onFilesDrop:function(w){if(n.hasAttachment(this.context.composerID)&&this.state.pendingFiles==null){this.setState({photoDropWarningShown:true,pendingFiles:w});return;}p.uploadDroppedFiles(this.context.composerID,w,this._uploader);},_onPhotoDropWarningCancel:function(){this.setState({photoDropWarningShown:false,pendingFiles:null});},_onPhotoDropWarningConfirm:function(){var w=this.state.pendingFiles;this.setState({photoDropWarningShown:false,pendingFiles:null});this._onFilesDrop(w);},_onURLDrop:function(w){p.scrapeLink(this.context.composerID,this.context.targetID,w,this.context.composerType);}});f.exports=v;},null);
__d('ReactComposerMediaAttachmentButtons.react',['ReactComposerContextMixin','ReactComposerMediaUtils','ReactComposerPhotoUploadActions','ComposerTargetData','DOMContainer.react','FileInput.react','Grid.react','Link.react','ReactComponentWithPureRenderMixin','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=n.GridItem,u=q.PropTypes,v=q.createClass({displayName:'ReactComposerMediaAttachmentButtons',mixins:[p,h],propTypes:{createAlbumLink:u.any,mediaAcceptParam:u.shape({photos:u.string,both:u.string}).isRequired,onFilesSelected:u.func.isRequired,showUploadPhotosButton:u.bool,targetData:u.instanceOf(k).isRequired},getDefaultProps:function(){return {mediaAcceptParam:{}};},getInitialState:function(){return {createAlbumLink:null};},componentDidMount:function(){var w=q.createElement(l,{className:"_3mc1",display:'block'},this.props.createAlbumLink);this.setState({createAlbumLink:w});},render:function(){var w=[];w.push(this._getUploadPhotosButton());if(this.state.createAlbumLink)w.push(q.createElement(t,{className:"_4l9a",key:'createAlbum'},q.createElement(o,{className:"_2709"},this.state.createAlbumLink)));return (q.createElement('div',{className:"_4l99"},q.createElement(n,{className:"_2707",cols:w.length},w.filter(function(x){return x!=null;}))));},_getUploadPhotosButton:function(){if(!this.props.showUploadPhotosButton)return null;var w=this.props.targetData.targetSupportsMultiplePhotos,x=this.props.mediaAcceptParam.both,y=w?s._("Upload Photos\/Video"):s._("Upload Photo\/Video");return (q.createElement(t,{className:"_4l9a",key:'uploadPhoto'},q.createElement(m,{accept:x,multiple:w,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:'fileInput','data-testid':'media-attachment-add-photo'},q.createElement(o,{className:"_2709"},q.createElement('div',{className:"_270a"},y)))));},_onUploadPhotosClick:function(){j.inputClicked(this.context.composerID);},_onFilesSelected:function(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());i.clearInput(this.refs.fileInput.getFileInput());}});f.exports=v;},null);
__d('ReactComposerFailedPhotoUpload.react',['ReactComponentWithPureRenderMixin','React','Tooltip','XUIButton.react','XUICloseButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=i.createClass({displayName:'ReactComposerFailedPhotoUpload',mixins:[h],propTypes:{error:o.object.isRequired,filename:o.string,onDismissClick:o.func,onRemoveClick:o.func,onRetryClick:o.func,uploadID:o.string.isRequired},render:function(){var q=this.props.error.summary+': '+this.props.error.description,r=this.props.error.transient?i.createElement(k,{className:"_2n21",label:n._("Retry"),onClick:this.props.onRetryClick,size:'small',use:'special'}):i.createElement(k,{className:"_2n22",label:n._("Okay"),onClick:this.props.onDismissClick,size:'small'});return (i.createElement('div',babelHelpers._extends({},j.propsFor(q),{className:"_2n23"}),i.createElement(l,{className:"_2n25",onClick:this.props.onRemoveClick,size:'medium',shade:'light'}),i.createElement('p',{className:"_2n26"},n._("Error")),i.createElement('div',{className:"_2n27"},i.createElement('p',{className:"_2n28"},this.props.filename)),r));}});f.exports=p;},null);
__d('ReactComposerFailedPhotoUploadContainer.react',['ReactComposerContextMixin','ReactComposerFailedPhotoUpload.react','ReactComposerPhotoUploadActions','ReactComposerPhotoUploader','ReactComposerPhotoUploadStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=n.PropTypes,p=n.createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',_uploader:undefined,mixins:[m,h],propTypes:{mediaConfig:o.object.isRequired},render:function(){return (n.createElement(i,babelHelpers._extends({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick})));},_onDismissClick:function(){j.removePhotoUpload(this.context.composerID,this.props.uploadID);},_onRetryClick:function(){var q=l.getPhotoUpload(this.context.composerID,this.props.uploadID).fileUpload.getFile();q.manuallyRetried=true;j.retryPhotoUpload(this.context.composerID);if(!this._uploader)this._uploader=new k(this.context,this.props.mediaConfig.photoLimit,{disableFaceRecognition:this.props.mediaConfig.disableFaceboxTagger});this._uploader&&this._uploader.retry(q);}});f.exports=p;},null);
__d('ReactComposerFaceboxTaggerTypeaheadPresenter',['React','XUITypeaheadView.react','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'ComposerFaceboxTaggerTypeaheadView',render:function(){return (h.createElement('div',{className:"_3ntx"},h.createElement(i,this.props)));}}),l={ViewRenderer:k,useLayer:true};f.exports=l;},null);
__d('ReactComposerPhotoFaceboxTagger.react',['ReactComposerFaceboxTaggerTypeaheadPresenter','ReactComponentWithPureRenderMixin','React','XUITypeahead.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'ReactComposerPhotoFaceboxTagger',mixins:[i],propTypes:{faceboxID:n.string.isRequired,dataSource:n.object.isRequired,onTagAdded:n.func.isRequired},getInitialState:function(){return {query:''};},render:function(){var p=m._("Who is this?");return (j.createElement(k,{className:"_xgd",queryString:this.state.query,placeholder:p,onSelectAttempt:this._onTokenSelected,onChange:this._onTypeaheadChanged,searchSource:this.props.dataSource,highlightOnSelect:true,showEntriesOnFocus:true,autoHighlight:true,selectOnTab:true,focusedOnInit:true,presenter:h}));},_onTokenSelected:function(p){this.props.onTagAdded(this.props.faceboxID,p.getUniqueID(),p.getTitle());},_onTypeaheadChanged:function(event){this.setState({query:event.target.value});}});f.exports=o;},null);
__d('ReactComposerQAndAActionType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({SET_QANDA_CONFIG:null});},null);
__d('ReactComposerQAndAStore',['ReactComposerQAndAActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(){'use strict';var m;k.constructor.call(this,function(){return {photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null};},function(n){switch(n.type){case h.SET_QANDA_CONFIG:m&&m.$ReactComposerQAndAStore1(n);break;}});m=this;}l.prototype.getPhotoLimit=function(m){'use strict';return this.getComposerData(m).photoLimit;};l.prototype.getProfilePicSrc=function(m){'use strict';return this.getComposerData(m).profilePicSrc;};l.prototype.getProfileURI=function(m){'use strict';return this.getComposerData(m).profileURI;};l.prototype.getFaceboxDataSource=function(m){'use strict';return this.getComposerData(m).faceboxDataSource;};l.prototype.$ReactComposerQAndAStore1=function(m){'use strict';var n=this.validateAction(m,['composerID','config']),o=n[0],p=n[1],q=this.getComposerData(o);q.photoLimit=p.photoLimit;q.profilePicSrc=p.profilePicSrc;q.profileURI=p.profileURI;q.faceboxDataSource=p.faceboxDataSource;this.emitChange(m.composerID);};f.exports=new l();},null);
__d('ReactComposerPhotoFaceboxTaggerContainer.react',['ReactComposerMediaStore','ReactComposerPhotoFaceboxTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerQAndAStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=m.PropTypes,o=m.createClass({displayName:'ReactComposerPhotoFaceboxTaggerContainer',mixins:[l,j(h,k)],propTypes:{faceboxID:n.string.isRequired,onTagAdded:n.func.isRequired},statics:{calculateState:function(p){var q=h.getTaggingDataSource(p)||k.getFaceboxDataSource(p);q&&q.bootstrap();return {dataSource:q};}},render:function(){return (m.createElement(i,{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded}));}});f.exports=o;},null);
__d('ReactComposerPhotoActionButton.react',['ReactComponentWithPureRenderMixin','React','Tooltip','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'ReactComposerPhotoActionButton',mixins:[h],propTypes:{tooltip:m.string,className:m.string,onClick:m.func,iconClassName:m.string},render:function(){var o=l(this.props.className,"_jfh");return (i.createElement('button',babelHelpers._extends({className:o,onClick:this.props.onClick,tabIndex:'0'},j.propsFor(this.props.tooltip)),i.createElement('div',{className:this.props.iconClassName})));}});f.exports=n;},null);
__d('ReactComposerPhotoEditActionButton.react',['ReactComposerPhotoActionButton.react','ReactComponentWithPureRenderMixin','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'ReactComposerPhotoEditActionButton',mixins:[i],propTypes:{onClick:m.func},render:function(){var o=l._("Edit Photo");return (j.createElement(h,{className:"_4_z4",onClick:this.props.onClick,tooltip:o,iconClassName:"_4_z5"}));}});f.exports=n;},null);
__d('ReactComposerPhotoTagActionButton.react',['ReactComposerPhotoActionButton.react','ReactComponentWithPureRenderMixin','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'ReactComposerPhotoTagActionButton',mixins:[i],propTypes:{hasTag:m.bool.isRequired},render:function(){var o=l._("Tag");return (j.createElement(h,{className:"_cwf"+(this.props.hasTag?' '+"_cwh":''),tooltip:o,iconClassName:"_cwg"}));}});f.exports=n;},null);
__d('ReactComposerPhotoTaggedFaceboxSummary.react',['Image.react','LeftRight.react','ReactComponentWithPureRenderMixin','React','TooltipLink.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=k.PropTypes,q=k.createClass({displayName:'ReactComposerPhotoTaggedFaceboxSummary',mixins:[j],propTypes:{faceboxID:p.string.isRequired,onTagRemoved:p.func.isRequired,taggedSubjectID:p.string.isRequired,taggedValue:p.string.isRequired},render:function(){var r=n._("Edit Name");return (k.createElement(i,{className:"_31bg"},k.createElement('div',{className:"_31bh"},this.props.taggedValue),k.createElement(l,{alignH:'center',position:'below',tooltip:r,onClick:this._onEditClicked},k.createElement(h,{src:o('/images/icons/edit.png')}))));},_onEditClicked:function(){this.props.onTagRemoved(this.props.faceboxID,this.props.taggedSubjectID);}});f.exports=q;},null);
__d('ReactComposerPhotoTagger.react',['ReactComposerContextMixin','ReactComposerPhotoActions','ReactComposerPhotoFaceboxTaggerContainer.react','ReactComposerPhotoEditActionButton.react','ReactComposerPhotoTagActionButton.react','ReactComposerPhotoTaggedFaceboxSummary.react','AsyncRequest','ContextualLayerAutoFlip','Image.react','ImageBlock.react','immutable','ReactLayeredComponentMixin','LayerHideOnBlur','LayerHideOnEscape','LayerTabIsolation','ReactComponentWithPureRenderMixin','React','ReactDOM','XStickerPhotoEditorController','PhotoEditorTargetType','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIDialogCloseButton.react','XUIContextualDialogFooter.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=x.PropTypes,ia=268,ja=32,ka=x.createClass({displayName:'ReactComposerPhotoTagger',_photoEditorRequest:undefined,mixins:[s,w,h],propTypes:{draggingPhotos:ha.bool,enableFaceboxTagger:ha.bool.isRequired,disablePhotoEditing:ha.bool.isRequired,faceboxes:ha.instanceOf(r.Map).isRequired,onEditClick:ha.func,onTagAdded:ha.func.isRequired,onTagIntent:ha.func,onTagRemoved:ha.func.isRequired,originalID:ha.string,photoID:ha.string.isRequired,shown:ha.bool.isRequired},getDefaultProps:function(){return {shown:false};},componentWillReceiveProps:function(la){if(!this.props.draggingPhotos&&la.draggingPhotos)i.setPhotoBeingTagged(this.context.composerID,null);},render:function(){var la=this.props.enableFaceboxTagger?x.createElement(l,{hasTag:this._hasTag()}):null,ma=this.props.disablePhotoEditing?null:x.createElement(k,{onClick:this._onEditClick});return (x.createElement('div',{className:"_jfi",onClick:this._onClick,tabIndex:'-1'},la,ma));},renderLayers:function(){if(!this.props.shown||!this.props.enableFaceboxTagger)return null;return {dialog:this._getDialog()};},_getDialog:function(){return (x.createElement(ba,{ref:'dialog',shown:this.props.shown,onToggle:this._onDialogToggled,context:y.findDOMNode(this),position:'below',alignment:'center',width:ia,behaviors:{LayerHideOnBlur:t,LayerHideOnEscape:u,ContextualLayerAutoFlip:o,LayerTabIsolation:v}},x.createElement(ca,null,this._getDialogBody()),x.createElement(ea,null,x.createElement(da,{use:'confirm',label:'Close',onClick:this._onCloseButtonClicked}))));},_getDialogBody:function(){if(this.props.faceboxes.size===0)return ga._("We could not find any faces to tag.");return this.props.faceboxes.valueSeq().map((function(la){var ma=la.taggedSubjectID?x.createElement(m,{faceboxID:la.id,onTagRemoved:this.props.onTagRemoved,taggedSubjectID:la.taggedSubjectID,taggedValue:la.taggedValue}):x.createElement(j,{faceboxID:la.id,onTagAdded:this.props.onTagAdded});return (x.createElement(q,{key:la.id,className:"_qv7"},x.createElement(p,{className:"_qv8",height:ja,src:la.croppedURI,width:ja}),ma));}).bind(this));},_hasTag:function(){return this.props.faceboxes.some(function(la){return !!la.taggedSubjectID;});},_onCloseButtonClicked:function(){i.setPhotoBeingTagged(this.context.composerID,null);},_onDialogToggled:function(la){if(!la)this._onCloseButtonClicked();},_onClick:function(){this.props.onTagIntent&&this.props.onTagIntent();i.setPhotoBeingTagged(this.context.composerID,this.props.photoID);},_onEditClick:function(event){event.stopPropagation();if(this._photoEditorRequest)return;var la=z.getURIBuilder().setString('grid_id',this.context.composerID).setEnum('target_type',aa.REACT_COMPOSER).setInt('latest_fbid',this.props.photoID).setInt('photo_fbid',this.props.originalID||this.props.photoID).getURI();this._photoEditorRequest=new n(la).setFinallyHandler((function(){this._photoEditorRequest=null;}).bind(this));this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick();i.startPhotoEdit(this.context.composerID);}});f.exports=ka;},null);
__d('ReactComposerPhoto.react',['ReactComposerMediaConfig','ReactComposerPhotoTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','Image.react','ImageBlock.react','immutable','LoadingIndicator.react','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','XUIAmbientNUX.react','XUICloseButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIText.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=q.PropTypes,ba=q.createClass({displayName:'ReactComposerPhoto',mixins:[p,r,j(k)],propTypes:{draggingPhotos:aa.bool,enableFaceboxTagger:aa.bool,disablePhotoEditing:aa.bool,faceboxes:aa.instanceOf(n.Map).isRequired,onEditClick:aa.func,onRemoveButtonClicked:aa.func.isRequired,onTagAdded:aa.func.isRequired,onTaggingNUXClose:aa.func,onTagIntent:aa.func,onTagRemoved:aa.func.isRequired,originalID:aa.string,photoID:aa.string.isRequired,showStickersNUX:aa.bool,showTaggingNUX:aa.bool,thumbSrc:aa.string.isRequired},getDefaultProps:function(){return {enableFaceboxTagger:true,disablePhotoEditing:false};},statics:{calculateState:function(ca,da){return {posting:k.isPosting(ca)};}},render:function(){var ca={width:h.photo.thumbWidth,height:h.photo.thumbHeight},da=this.props.isRecognizingFaceboxes?q.createElement('div',{className:"_jff"},q.createElement(o,{className:"_jfg",size:'small',color:'white'})):null,ea="_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":''),fa,ga;if(!this.state.posting){fa=q.createElement(t,{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});ga=q.createElement(i,{draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger});}return (q.createElement('div',{ref:'root',className:ea,style:ca},fa,q.createElement(l,{src:this.props.thumbSrc,width:h.photo.thumbWidth,height:h.photo.thumbHeight}),da,ga));},renderLayers:function(){return {taggingNUX:this.props.enableFaceboxTagger?this._getTaggingNux():null,stickersNUX:this.props.disablePhotoEditing?null:this._getStickersNux()};},_getTaggingNux:function(){return (q.createElement(u,{contextRef:(function(){return this.refs.root;}).bind(this),position:'below',alignment:'left',shown:this.props.showTaggingNUX,width:300},q.createElement(v,null,q.createElement(t,{className:"rfloat",onClick:this.props.onTaggingNUXClose}),q.createElement('div',null,q.createElement(w,{weight:'bold',display:'block'},y._("Now It's Easier to Tag Photos.")),y._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[y.param('tagging_badge_icon',q.createElement(l,{src:z('/images/photos/tagging_badge_white.png')}))])))));},_getStickersNux:function(){return (q.createElement(s,{alignment:'right',contextRef:(function(){return this.refs.root;}).bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:'below',shown:this.props.showStickersNUX},q.createElement(m,{spacing:'medium'},q.createElement(l,{src:z('/images/photos/editor/beast.png')}),q.createElement('div',{className:"_21ft"},q.createElement('div',{className:"_21fs"},y._("New! Add Stickers!")),y._("You can now add stickers to your photos")))));}});f.exports=ba;},null);
__d('ReactComposerNUXActionType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({NUX_WAS_SHOWN:null,NUX_WAS_SEEN:null});},null);
__d('ReactComposerNUXStore',['ReactComposerStoreBase','ReactComposerNUXActionType','AsyncRequest','Map'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;function n(){'use strict';var o;m.constructor.call(this,function(){return {nuxes:new k()};},function(p){switch(p.type){case i.NUX_WAS_SHOWN:o&&o.$ReactComposerNUXStore1(p);break;case i.NUX_WAS_SEEN:o&&o.$ReactComposerNUXStore2(p);break;}});o=this;}n.prototype.hasNUXBeenSeen=function(o,p){'use strict';return this.$ReactComposerNUXStore3(o,p).seen;};n.prototype.getNUXShownPhotoID=function(o,p){'use strict';return this.$ReactComposerNUXStore3(o,p).photoID;};n.prototype.$ReactComposerNUXStore1=function(o){'use strict';var p=this.validateAction(o,['composerID','nuxType','photoID']),q=p[0],r=p[1],s=p[2],t=this.$ReactComposerNUXStore3(q,r);t.photoID=s;this.emitChange(q);};n.prototype.$ReactComposerNUXStore2=function(o){'use strict';var p=this.validateAction(o,['composerID','nuxType']),q=p[0],r=p[1],s=this.$ReactComposerNUXStore3(q,r);s.seen=true;new j('/ajax/photos/composer/mark_nux_seen.php').setData({type:r}).send();this.emitChange(q);};n.prototype.$ReactComposerNUXStore3=function(o,p){'use strict';var q=this.getComposerData(o),r=q.nuxes.get(p);if(!r){r={seen:false,photoID:null};q.nuxes.set(p,r);}return r;};f.exports=new n();},null);
__d('ReactComposerNUXActions',['ReactComposerNUXActionType','ReactComposerDispatcher','ReactComposerNUXStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();c('ReactComposerNUXStore');var j={nuxWasShown:function(k,l,m){i.dispatch({composerID:k,type:h.NUX_WAS_SHOWN,nuxType:l,photoID:m});},nuxWasSeen:function(k,l){i.dispatch({composerID:k,type:h.NUX_WAS_SEEN,nuxType:l});}};f.exports=j;},null);
__d('ReactComposerPhotoContainer.react',['ReactComposerPhoto.react','ReactComposerPhotoActions','ReactComposerPhotoStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerNUXActions','ReactComposerNUXStore','ComposerXNUX','ReactComponentWithPureRenderMixin','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=p.PropTypes,s=p.createClass({displayName:'ReactComposerPhotoContainer',mixins:[o,k(m,j)],propTypes:{draggingPhotos:r.bool,dragHandler:r.shape({add:r.func.isRequired,remove:r.func.isRequired}),enableFaceboxTagger:r.bool,disablePhotoEditing:r.bool,nuxConfig:r.object.isRequired,photoID:r.string.isRequired,uploadID:r.string.isRequired},statics:{beforeCalculateInitialState:function(t,u){var v=j.getPhoto(t,u.photoID),w=this._shouldShowStickersNUX(t,v,u.nuxConfig),x=this._shouldShowTaggingNUX(t,v,u.nuxConfig);if(w)l.nuxWasShown(t,n.ADD_STICKERS_NUX,v.id);if(x)l.nuxWasShown(t,n.TAGGING_FLYOUT_NUX,v.id);},calculateState:function(t,u){var v=j.getPhoto(t,u.photoID),w=this._shouldShowStickersNUX(t,v,u.nuxConfig),x=this._shouldShowTaggingNUX(t,v,u.nuxConfig),y=j.getPhotoBeingTagged(t)===u.photoID;return {faceboxes:v.faceboxes,thumbSrc:v.thumbSrc,isRecognizingFaceboxes:v.isRecognizingFaceboxes,showPhotoTagger:y,showStickersNUX:w,showTaggingNUX:x};},_couldShowNUX:function(t,u,v,w){var x=m.getNUXShownPhotoID(t,w),y=m.hasNUXBeenSeen(t,w);return (!!v[w]&&!y&&(!x||x===u.id));},_shouldShowStickersNUX:function(t,u,v){return this._couldShowNUX(t,u,v,n.ADD_STICKERS_NUX);},_shouldShowTaggingNUX:function(t,u,v){return (this._couldShowNUX(t,u,v,n.TAGGING_FLYOUT_NUX)&&u.faceboxes.size>0);}},componentDidMount:function(){setTimeout((function(){var t=this.props.dragHandler;t&&t.add(q.findDOMNode(this.refs.container));}).bind(this),0);},componentWillUnmount:function(){setTimeout((function(){var t=this.props.dragHandler;t&&t.remove(q.findDOMNode(this.refs.container));}).bind(this),0);},render:function(){return (p.createElement(h,babelHelpers._extends({},this.props,this.state,{onEditClick:this._onEditClick,onRemoveButtonClicked:this._onRemoveButtonClicked,onStickersNUXClose:this._onStickersNUXClose,onTagAdded:this._onTagAdded,onTagIntent:this._onTagIntent,onTaggingNUXClose:this._onTaggingNUXClose,onTagRemoved:this._onTagRemoved,ref:'container'})));},_onEditClick:function(){this._onStickersNUXClose();},_onRemoveButtonClicked:function(){i.removePhoto(this.context.composerID,this.props.photoID,this.props.uploadID);},_onStickersNUXClose:function(){l.nuxWasSeen(this.context.composerID,n.ADD_STICKERS_NUX);},_onTagAdded:function(t,u,v){i.tagFacebox(this.context.composerID,this.props.photoID,t,u,v);},_onTaggingNUXClose:function(){l.nuxWasSeen(this.context.composerID,n.TAGGING_FLYOUT_NUX);},_onTagIntent:function(){if(this.state.showTaggingNUX)this._onTaggingNUXClose();},_onTagRemoved:function(t,u){i.untagFacebox(this.context.composerID,this.props.photoID,t,u);}});f.exports=s;},null);
__d('ReactComposerPhotoUploadPlaceholder.react',['ReactComposerPhotoUploadState','LoadingIndicator.react','ProgressBar.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'ReactComposerPhotoUploadPlaceholder',mixins:[k],propTypes:{onRemoveButtonClicked:o.func.isRequired,uploadID:o.string.isRequired,uploadState:o.oneOf(Object.keys(h)).isRequired,uploadProgress:o.number},render:function(){var q=null,r=null,s=this.props.uploadState,t=s===h.PHOTO_UPLOAD_RESIZE_STARTED,u=s===h.PHOTO_UPLOAD_UPLOADING;if(t||u){var v="_1b01"+(t?' '+"_1b02":'')+(u?' '+"_1b03":'');q=l.createElement(j,{value:this.props.uploadProgress,className:v});}else r=l.createElement(i,{className:"_1b00",color:'white',size:'medium'});return (l.createElement('div',{className:"_1a__"},l.createElement(m,{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'dark'}),q,r));}});f.exports=p;},null);
__d('ReactComposerPhotoUploadPlaceholderContainer.react',['ReactComposerPhotoUploadActions','ReactComposerPhotoUploadPlaceholder.react','ReactComposerPhotoUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=m.PropTypes,o=m.createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',mixins:[l,k(j)],propTypes:{uploadID:n.string.isRequired},statics:{calculateState:function(p,q){var r=j.getPhotoUpload(p,q.uploadID);return {uploadProgress:r.progress,uploadState:r.state};}},render:function(){return (m.createElement(i,babelHelpers._extends({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked})));},_onRemoveButtonClicked:function(){h.removePhotoUpload(this.context.composerID,this.props.uploadID);}});f.exports=o;},null);
__d('ReactComposerDraggablePhoto.react',['ReactComposerContextMixin','ReactComposerFailedPhotoUploadContainer.react','ReactComposerPhotoActions','ReactComposerPhotoContainer.react','ReactComposerPhotoUploadPlaceholderContainer.react','ReactComposerPhotoUploadState','Draggable','ReactComponentWithPureRenderMixin','React','ReactDOM','Vector','cx','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=p.PropTypes,v=200,w=5,x=m.PHOTO_UPLOAD_DONE,y=p.createClass({displayName:'ReactComposerDraggablePhoto',_draggable:undefined,_grabbed:undefined,mixins:[o,h],propTypes:{enableFaceboxTagger:u.bool,disablePhotoEditing:u.bool,mediaConfig:u.object.isRequired,nuxConfig:u.object.isRequired,upload:u.object.isRequired,draggingPhotos:u.bool,index:u.number,updateComponentPosition:u.func.isRequired,onGrab:u.func.isRequired,onDrag:u.func.isRequired,onDrop:u.func.isRequired},getInitialState:function(){return {dragging:false};},componentWillReceiveProps:function(z){if(this.props.index!==z.index&&z.index!==undefined)setTimeout(this._updateComponentPosition,0);},componentDidUpdate:function(z){if(z.upload.state!==x&&this.props.upload.state===x){this._createDraggable();}else if(z.upload.state===x&&this.props.upload.state!==x)this._draggable&&this._draggable.destroy();},componentDidMount:function(){if(this.props.upload.state===x)this._createDraggable();setTimeout(this._updateComponentPosition,0);},componentWillUnmount:function(){this._draggable&&this._draggable.destroy();},render:function(){var z=(this.state.dragging?"_3j72":'')+(' '+"_3j73");return (p.createElement('div',{className:z,onClick:this._onClick,key:this.props.upload.photoID||this.props.upload.id},this._getInnerComponent()));},_getInnerComponent:function(){var z=this.props.upload;if(z.state===x){var aa=this,ba={add:function(ca){aa._draggable&&aa._draggable.addHandle(ca);},remove:function(ca){aa._draggable&&aa._draggable.removeHandle(ca);}};return (p.createElement(k,{draggingPhotos:this.props.draggingPhotos,dragHandler:ba,enableFaceboxTagger:this.props.enableFaceboxTagger,disablePhotoEditing:this.props.disablePhotoEditing,key:z.photoID,nuxConfig:this.props.nuxConfig,originalID:z.originalPhotoID,photoID:z.photoID,uploadID:z.id}));}if(z.state===m.PHOTO_UPLOAD_FAILED)return (p.createElement(i,{error:z.error,filename:z.filename,key:z.id,mediaConfig:this.props.mediaConfig,uploadID:z.id}));return (p.createElement(l,{key:z.id,uploadID:z.id}));},_createDraggable:function(){this._draggable=new n(q.findDOMNode(this)).setNamespace('ReactComposer').setUseAbsolute(true).setAvoidKillingEvents(true).setGutter(w).setGrabHandler(this._onGrab).setDragHandler(t(this._onDrag,v)).setDropHandler(this._onDrop);this._updateComponentPosition();},_updateComponentPosition:function(){var z=q.findDOMNode(this);this.props.updateComponentPosition(this.props.upload.id||this.props.upload.photoID,r.getElementPosition(z),r.getElementDimensions(z));},_onGrab:function(){if(this.state.dragging)return;this._grabbed=true;var z=q.findDOMNode(this);this.props.onGrab(this.props.upload.id||this.props.upload.photoID,z);},_onDrag:function(z){if(!this._grabbed)return;this.setState({dragging:true});this.props.onDrag(z);},_onDrop:function(z){this._draggable&&this._draggable.resetPosition();this.setState({dragging:false});this._grabbed=false;this.props.onDrop(z);},_onClick:function(){j.setPhotoBeingTagged(this.context.composerID,this.props.upload.photoID);}});f.exports=y;},null);
__d('ReactComposerGenericPhotoUploadLink.react',['ReactComponentWithPureRenderMixin','React','Link.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'ReactComposerGenericPhotoUploadLink',mixins:[h],propTypes:{className:m.string},getDefaultProps:function(){return {className:"__9t"};},render:function(){var o=l("__9u",this.props.className);return (i.createElement(j,{className:o},this.props.children));}});f.exports=n;},null);
__d('ReactComposerPhotoUploadsGrid.react',['ReactComposerContextMixin','ReactComposerDraggablePhoto.react','ReactComposerGenericPhotoUploadLink.react','ReactComposerMediaScrollableArea.react','ReactComposerMediaUtils','ReactComposerPhotoUploadActions','FileInput.react','immutable','ReactComponentWithPureRenderMixin','React','ReactDOM','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=q.PropTypes,v=112,w=q.createClass({displayName:'ReactComposerPhotoUploadsGrid',mixins:[p,h],propTypes:{enableFaceboxTagger:u.bool,disablePhotoEditing:u.bool,mediaAcceptParam:u.string,mediaConfig:u.object.isRequired,nuxConfig:u.object.isRequired,onFilesSelected:u.func,canUploadMultiplePhotos:u.bool,uploads:u.instanceOf(o.List).isRequired,onDrop:u.func,photoUploadLink:u.element,sourceIndex:u.number,targetIndex:u.number,updateComponentPosition:u.func.isRequired,showAddMoreButtonInit:u.bool},getDefaultProps:function(){return {canUploadMultiplePhotos:false,photoUploadLink:q.createElement(j,null),showAddMoreButtonInit:true,showSellUploadLink:false};},render:function(){var x=null;if(this.props.canUploadMultiplePhotos||this.props.showAddMoreButtonInit&&this.props.uploads.size===0)x=q.createElement('span',{ref:'addMore',className:"_58i2"},q.createElement(n,{accept:this.props.mediaAcceptParam,multiple:this.props.canUploadMultiplePhotos,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onAddMorePhotosClick,ref:'fileInput',title:t._("Choose a file to upload"),'data-testid':'add-more-photos'},this.props.photoUploadLink));return (q.createElement('div',{className:"_58hb"},q.createElement('div',{className:"_58hc"},q.createElement(k,{fade:true,getAddMoreDOM:this._getAddMoreDOM,height:v,photosCount:this.props.uploads.size,scrollbar:'fade',verticalScroll:true},this._getComponents(),x))));},_onAddMorePhotosClick:function(){m.inputClicked(this.context.composerID);},_onFilesSelected:function(event){if(this.props.onFilesSelected){var x=this.props.onFilesSelected;x(event,this.refs.fileInput.getFileInput());}l.clearInput(this.refs.fileInput.getFileInput());},_getComponents:function(){var x=this.props.uploads.toSeq().filter((function(z,aa){return aa!==this.props.sourceIndex;}).bind(this)).map((function(z,aa){return this._getDraggablePhoto(z,aa);}).bind(this));if(this.props.targetIndex!=null){var y=q.createElement('div',{key:'placeholder',className:"_4e74"});x=x.splice(this.props.targetIndex,0,y);}if(this.props.sourceIndex!=null)x=x.splice(this.props.sourceIndex,0,this._getDraggablePhoto(this.props.uploads.get(this.props.sourceIndex)));return x.toArray();},_getDraggablePhoto:function(x,y){return (q.createElement(i,{enableFaceboxTagger:this.props.enableFaceboxTagger,disablePhotoEditing:this.props.disablePhotoEditing,key:x.id,nuxConfig:this.props.nuxConfig,upload:x,draggingPhotos:this.props.sourceIndex!=null,index:y,mediaConfig:this.props.mediaConfig,updateComponentPosition:this.props.updateComponentPosition,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop}));},_getAddMoreDOM:function(){return r.findDOMNode(this.refs.addMore);}});f.exports=w;},null);
__d('ReactComposerPhotoUploadsGridContainer.react',['ReactComposerContextMixin','ReactComposerPhotoUploadActions','ReactComposerPhotoUploadsGrid.react','Locale','ReactComponentWithPureRenderMixin','React','ReactDOM','Rect','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=m.PropTypes,r=m.createClass({displayName:'ReactComposerPhotoUploadsGridContainer',_componentsPosition:{},mixins:[l,h],propTypes:{photoUploadLink:q.element,enableFaceboxTagger:q.bool,disablePhotoEditing:q.bool,showSellUploadLink:q.bool},getInitialState:function(){return {rtl:k.isRTL(),sourceIndex:null,targetIndex:null,uploads:this.props.uploads};},componentWillReceiveProps:function(s){if(this.state.uploads!==s.uploads)this.setState({uploads:s.uploads});},render:function(){return (m.createElement(j,babelHelpers._extends({},this.props,{onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,sourceIndex:this.state.sourceIndex,targetIndex:this.state.targetIndex,updateComponentPosition:this._updateComponentPosition,uploads:this.state.uploads})));},_onGrab:function(s,t){var u=this.state.uploads.findIndex(function(v){return v.id===s;});this.setState({sourceIndex:u,targetIndex:u});},_onDrag:function(s){var t=p.getElementPosition(n.findDOMNode(this));s=s.sub(t);this.setState({targetIndex:this._getTargetID(s)});},_onDrop:function(s){this._onDrag(s);var t=this.state.sourceIndex,u=this.state.targetIndex;if(t==null||u==null)return;if(t!==u){var v=this.state.uploads;v=v.splice(t,1).splice(u,0,v.get(t));this.setState({uploads:v});i.photoMoved(this.context.composerID,t,u);}this._endDrag();},_endDrag:function(){this.setState({sourceIndex:null,targetIndex:null});},_getTargetID:function(s){var t=this.state.uploads,u=this.state.rtl?function(z,aa){return z.right>=aa.x;}:function(z,aa){return z.left<=aa.x;};for(var v=t.size-1;v>=0;v--){var w=t.get(v),x=w.id,y=this._componentsPosition[x];if(u(y,s))return v;}return 0;},_updateComponentPosition:function(s,t,u){var v=new o(n.findDOMNode(this));this._componentsPosition[s]={left:t.x-v.l,right:t.x-v.l+u.x};}});f.exports=r;},null);
__d('ReactComposerBackdateTaggerButton.react',['ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=j.createClass({displayName:'ReactComposerBackdateTaggerButton',mixins:[h],statics:{taggerID:i.BACKDATE},getTitle:function(){return l._("Set date and time of your post");},getTooltip:function(){return l._("Set date and time of your post");},getClassName:function(){return "_2czx";}});f.exports=m;},null);
__d('ReactComposerBackdateTaggerComponent.react',['Grid.react','ProgressiveDateAndTimePicker.react','React','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.GridItem,o=j.PropTypes,p=j.createClass({displayName:'ReactComposerBackdateTaggerComponent',propTypes:{taggerData:o.object.isRequired,onSelect:o.func.isRequired},getDefaultProps:function(){return {taggerData:{},onSelect:l};},_onChange:function(q){this.props.onSelect(q);},render:function(){return (j.createElement(h,{cols:2,className:"_52mx _5esl",role:'presentation'},j.createElement(n,{key:'prefix',className:"_5esm",role:'presentation'},m._("When")),j.createElement(n,{key:'tagger',className:"_5esw",role:'presentation'},j.createElement(i,{className:"_52nc",initialYear:this.props.taggerData.year,initialMonth:this.props.taggerData.month,initialDay:this.props.taggerData.day,initialHour:this.props.taggerData.hour,initialMinute:this.props.taggerData.minute,descendingYears:true,onDateAndTimeChange:this._onChange}))));}});f.exports=p;},null);
__d('ReactComposerBackdateTaggerContainer.react',['ReactComposerBackdateTaggerComponent.react','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=k.createClass({displayName:'ReactComposerBackdateTaggerContainer',mixins:[i],statics:{taggerID:j.BACKDATE,taggerComponent:h}});f.exports=l;},null);
__d('ReactComposerImplicitLocationComponent.react',['React','XUICloseButton.react','cx','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'ReactComposerImplicitLocationComponent',propTypes:{caption:l.string.isRequired,hasExplicitLocation:l.bool,onClear:l.func},defaultProps:{onClear:k},render:function(){if(!this.props.caption)return h.createElement('noscript',null);var n=this.props.hasExplicitLocation?null:h.createElement(i,{className:"_1wl-",size:'small',onClick:this._onClear}),o="_1wly"+(this.props.hasExplicitLocation?' '+"_3q_y":'');return (h.createElement('span',{className:o},h.createElement('span',{className:"_1wlz"},this.props.caption.split(',')[0]),n));},_onClear:function(event){event.stopPropagation();this.props.onClear&&this.props.onClear();}});f.exports=m;},null);
__d('ReactComposerImplicitLocationContainer.react',['ReactComposerImplicitLocationComponent.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','AsyncRequest','URI','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=o.createClass({displayName:'ReactComposerImplicitLocationContainer',mixins:[i(k)],statics:{calculateState:function(q,r){var s=k.getTaggerData(q,l.LOCATION)||{},t=s.implicitLocation||{};return {caption:t.citystring,hasExplicitLocation:!!s.place};}},render:function(){if(!this.state.caption)return o.createElement('noscript',null);return (o.createElement(h,babelHelpers._extends({},this.state,{onClear:this._onClear})));},_onClear:function(){var q=k.getTaggerData(this.context.composerID,l.LOCATION)||{};q.implicitLocation=null;j.setTaggerData(this.context.composerID,l.LOCATION,q);var r=new n('/ajax/places/toggle_location_sharing').addQueryData({disable:1,session_id:q.sessionID});new m(r).send();}});f.exports=p;},null);
__d('ReactComposerPhotoTaggerButton.react',['ReactComposerContextMixin','ReactComposerMediaUtils','ComposerTargetData','FileInput.react','ReactComponentWithPureRenderMixin','React','TooltipLink.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'ReactComposerPhotoTaggerButton',mixins:[h,l],propTypes:{mediaAcceptParam:r.shape({photos:r.string,both:r.string}).isRequired,onClick:r.func,onFilesSelected:r.func.isRequired,photoLimit:r.number.isRequired,targetData:r.instanceOf(j).isRequired,hasData:r.bool,selected:r.bool},getDefaultProps:function(){return {hasData:false,mediaAcceptParam:{},selected:false};},render:function(){var t=q("_3xen"+(' '+"_50hp")+(this.props.hasData?' '+"_4pd":'')+(this.props.selected?' '+"_50hx":''),this.props.className),u=this.props.photoLimit>1?p._("Add photos to your post"):p._("Add a photo to your post");return (m.createElement('div',{className:"_3xem _3xen"},m.createElement(k,{accept:this.props.mediaAcceptParam.both,'aria-label':u,multiple:this.props.targetData.targetSupportsMultiplePhotos,name:'composer_photo',onChange:this._onFilesSelected,onClick:this.props.onClick,ref:'fileInput',role:'button',tabIndex:'0'},m.createElement(n,{className:t,onClick:this._onSelect,tooltip:u},m.createElement('span',{className:"accessible_elem"},this.props.photoLimit>1?p._("Add photos"):p._("Add photo"))))));},_onFilesSelected:function(event){this.props.onFilesSelected(event);i.clearInput(this.refs.fileInput.getFileInput());}});f.exports=s;},null);
__d('ReactComposerPhotoTaggerButtonContainer.react',['ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerMediaFilePickerMixin','ReactComposerPhotoTaggerButton.react','ReactComposerPhotoUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentStore','ComposerTargetData','ReactComposerVideoUploadStore','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=r.PropTypes,t=r.createClass({displayName:'ReactComposerPhotoTaggerButtonContainer',mixins:[n(h,m,o),k],propTypes:{bootloader:j,disableFaceRecognition:s.bool.isRequired,mediaAcceptParam:s.shape({photos:s.string,both:s.string}),photoLimit:s.number.isRequired,targetData:s.instanceOf(p).isRequired},getDefaultProps:function(){return {disableFaceRecognition:false};},statics:{calculateState:function(u,v){var w=h.getIsAttachmentSelected(u,i.MEDIA),x=m.getUploads(u),y=!q.getVideo(u)&&!o.hasAttachment(u)&&x.size<v.photoLimit;return {hasData:!!x.size&&w,shown:y};}},render:function(){if(!this.state.shown)return null;return (r.createElement(l,babelHelpers._extends({},this.props,this.state,{onClick:(function(){return this._onFileInputClick(this.props.bootloader&&this.props.bootloader.mediaAttachment);}).bind(this),onFilesSelected:this._onFilesSelected})));}});f.exports=t;},null);
__d('ReactComposerStatusFooter.react',['ReactComposerActivityTaggerButton.react','ReactComposerActivityTaggerContainer.react','ReactComposerAttachmentType','ReactComposerAudienceSelectorContainer.react','ReactComposerBackdateTaggerButton.react','ReactComposerBackdateTaggerContainer.react','ReactComposerBootloaderPropTypes','ReactComposerConfig','ReactComposerContextMixin','ReactComposerFooter.react','ReactComposerFooterActions.react','ReactComposerImplicitLocationContainer.react','ReactComposerLocationTaggerButton.react','ReactComposerLocationTaggerContainer.react','ReactComposerPeopleTaggerButton.react','ReactComposerPeopleTaggerContainer.react','ReactComposerPostButtonContainer.react','ReactComposerPhotoTaggerButtonContainer.react','ReactComposerTaggerButtons.react','ReactComposerTaggers.react','ReactComposerTaggerType','ReactComposerTaggerViewStyles','ComposerEntryPointRef','ComposerTargetData','LeftRight.react','PlaceSearchConstants','React','ReactComponentWithPureRenderMixin','cx','BasicTypeaheadLoggerJSConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){if(c.__markCompiled)c.__markCompiled();var ka=c('BasicTypeaheadLoggerJSConstants').EventNames,la=ha.PropTypes,ma=ha.createClass({displayName:'ReactComposerStatusFooter',mixins:[ia,p],propTypes:{additionalTaggers:la.arrayOf(la.shape({button:la.element.isRequired,container:la.element.isRequired})),additionalFooterActions:la.arrayOf(la.element),audienceXHP:la.instanceOf(HTMLElement),attachmentsConfig:la.object.isRequired,bootloader:n,config:o.isRequired,hasImplicitLocation:la.bool,isCameraIconEnabled:la.bool,locationTaggerPlaceholder:la.string,mediaAcceptParam:la.shape({photos:la.string,both:la.string}),mediaLocation:la.shape({latitude:la.number.isRequired,longitude:la.number.isRequired}),peopleTaggerPlaceholder:la.string,placeID:la.string,postButtonModule:la.func,taggersConfig:la.object.isRequired,taggersData:la.object,targetData:la.instanceOf(ea).isRequired},getDefaultProps:function(){return {taggersData:{},isCameraIconEnabled:true};},render:function(){var na=this.props.hasImplicitLocation?"_icv":'',oa=this.props.config.showExpandedComposer?'white':'light-wash';return (ha.createElement('div',null,this._getTaggers(),ha.createElement(q,{background:oa,className:na},ha.createElement(fa,null,this._getButtons(),this._getFooterActions()))));},_getTaggers:function(){var na=this.props.taggersConfig,oa=na[ba.PEOPLE].enabled?ha.createElement(w,{placeholder:this.props.peopleTaggerPlaceholder,taggerData:this._getTaggerData(ba.PEOPLE),showEntriesOnFocus:false,actorID:this.context.actorID,peopleTaggerConfig:na[ba.PEOPLE]}):null,pa=na[ba.LOCATION].enabled?ha.createElement(u,{implicitLocationEnabled:na[ba.LOCATION].implicitLocationEnabled,mediaLocation:this.props.mediaLocation,placeholder:this.props.locationTaggerPlaceholder,taggerData:this._getTaggerData(ba.LOCATION),taggerViewStyle:ca.SCROLLABLE,typeaheadLoggerEventName:ka.REACT_COMPOSER_LOCATION_TAGGER,typeaheadSearchSource:ga.SOURCE_W_COMPOSER}):null,qa=this.context.composerType===da.TIMELINE,ra=na[ba.OG].enabled?ha.createElement(i,{actionTypeIDsWithNoFreeForm:na[ba.OG].actionTypeIDsWithNoFreeForm,actorID:this.context.actorID,isPersonalTimeline:qa,objectTaggerViewStyle:ca.SCROLLABLE,placeID:this.props.placeID,actionTypeIDsToPrefetch:na[ba.OG].actionTypeIDsToPrefetch,rankVerbs:na[ba.OG].rankVerbs,taggerData:this._getTaggerData(ba.ACTIVITY),typeaheadLoggerEventName:ka.OGCOMPOSER_TAGGER}):null,sa=na[ba.BACKDATE].enabled?ha.createElement(m,null):null,ta=this.props.additionalTaggers?this.props.additionalTaggers.map(function(ua){return ua.container;}):null;return (ha.createElement(aa,null,oa,pa,ra,sa,ta));},_getTaggerData:function(na){return this.props.taggersData?this.props.taggersData[na]:undefined;},_getButtons:function(){var na=this.props.taggersConfig,oa=this.props.attachmentsConfig[j.MEDIA],pa=na[ba.CAMERA].enabled&&this.props.isCameraIconEnabled?ha.createElement(y,{bootloader:this.props.bootloader,disableFaceRecognition:oa.disableFaceboxTagger,photoLimit:oa.photoLimit,mediaAcceptParam:this.props.mediaAcceptParam,targetData:this.props.targetData}):null,qa=na[ba.PEOPLE].enabled?ha.createElement(v,null):null,ra=na[ba.OG].enabled?ha.createElement(h,null):null,sa=na[ba.LOCATION].enabled?ha.createElement(t,null,ha.createElement(s,null)):null,ta=na[ba.BACKDATE].enabled?ha.createElement(l,null):null,ua=this.props.additionalTaggers?this.props.additionalTaggers.map(function(va){return va.button;}):null;return (ha.createElement(z,null,pa,qa,ra,sa,ta,ua));},_getFooterActions:function(){var na=this.props.audienceXHP?ha.createElement(k,{audienceXHP:this.props.audienceXHP,viewerIsTarget:this.props.targetData.viewerIsTarget}):null,oa=this.props.postButtonModule||x,pa=ha.createElement(oa,{config:this.props.config});return (ha.createElement(r,null,this.props.additionalFooterActions,na,pa));}});f.exports=ma;},null);
__d('ReactComposerStatusFooterContainer.react',['ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStatusFooter.react','ReactComposerTaggerStore','ReactComposerTaggerType','React','ReactComponentWithPureRenderMixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=l.createClass({displayName:'ReactComposerStatusFooterContainer',mixins:[m,h(j)],statics:{calculateState:function(o,p){var q=j.getTaggerData(o,k.LOCATION),r=q&&q.implicitLocation&&!!q.implicitLocation.citystring,s=q&&q.place&&q.place.getUniqueID();return {hasImplicitLocation:r,mediaLocation:q?q.mediaLocation:null,placeID:s};}},render:function(){return (l.createElement(i,babelHelpers._extends({},this.props,{hasImplicitLocation:this.state.hasImplicitLocation,mediaLocation:this.state.mediaLocation,placeID:this.state.placeID})));}});f.exports=n;},null);
__d('ReactComposerVideoUploadPlaceholder.react',['ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','Image.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=l.PropTypes,q=l.createClass({displayName:'ReactComposerVideoUploadPlaceholder',mixins:[k,h(i)],propTypes:{onRemoveClick:p.func},statics:{calculateState:function(r,s){return {posting:i.isPosting(r)};}},render:function(){var r="_2oe _5ip5",s="_3ew _5iph",t=this.state.posting?null:l.createElement(m,{className:"_5ipi",onClick:this.props.onRemoveClick,shade:'light',size:'medium'});return (l.createElement('div',{className:r},t,l.createElement(j,{className:s,src:o('images/icons/timeline/placeholder/placeholder-movies.png')})));}});f.exports=q;},null);
__d('ReactComposerVideoUploadPlaceholderContainer.react',['ReactComposerContextMixin','ReactComposerVideoUploadActions','ReactComposerVideoUploadPlaceholder.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=l.createClass({displayName:'ReactComposerVideoUploadPlaceholderContainer',mixins:[k,h],render:function(){return (l.createElement(j,{onRemoveClick:this._onRemoveClick}));},_onRemoveClick:function(){i.remove(this.context.composerID);}});f.exports=m;},null);
__d('ReactComposerVideoUploadProgressBar.react',['DOMContainer.react','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'ReactComposerVideoUploadProgressBar',mixins:[i],propTypes:{progressBar:l.instanceOf(HTMLElement).isRequired},render:function(){return (j.createElement('div',{className:"_4340"},j.createElement(h,null,this.props.progressBar)));}});f.exports=m;},null);
__d('ReactComposerMediaAttachment.react',['ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextMixin','ReactComposerDragDropPromptContainer.react','ReactComposerMediaAttachmentButtons.react','ReactComposerPhotoUploadsGridContainer.react','ReactComposerProfilePhotoBlock.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react','ReactComposerStatusFooterContainer.react','ReactComposerStore','ReactComposerTaggerSummaryContainer.react','ReactComposerVideoUploadPlaceholderContainer.react','ReactComposerVideoUploadProgressBar.react','ReactComposerStatusUtils','immutable','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=x.PropTypes,aa=x.createClass({displayName:'ReactComposerMediaAttachment',mixins:[j,o(r)],propTypes:{additionalTaggers:z.arrayOf(z.shape({button:z.element.isRequired,container:z.element.isRequired})),config:i.isRequired,createAlbumLink:z.any,onFilesSelected:z.func.isRequired,onMentionsInputFocus:z.func,onPasteFiles:z.func,shouldShowCarouselURLInputArea:z.bool,shouldShowCarouselPreview:z.bool,postButtonModule:z.func,uploads:z.instanceOf(w.List).isRequired,video:z.object},statics:{calculateState:function(ba,ca){return {posting:r.isPosting(ba)};}},render:function(){var ba=this.props.config.attachmentsConfig[h.MEDIA],ca=this.props.uploads.size>0||!!this.props.video||ba.canUploadPhoto&&!this.props.createAlbumLink||this.props.shouldShowCarouselURLInputArea||this.props.shouldShowCarouselPreview,da=null;if(ba.ComposerMediaAttachmentButtonsWithCarouselOption){var ea=ba.ComposerMediaAttachmentButtonsWithCarouselOption;da=x.createElement(ea,{showUploadPhotosButton:ba.canUploadPhoto,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,targetData:this.props.config.targetData});}else da=x.createElement(l,{showUploadPhotosButton:ba.canUploadPhoto,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,targetData:this.props.config.targetData});return (ca?this._getMediaContent():x.createElement('div',null,x.createElement(k,{root:this,config:this.props.config}),da));},componentDidMount:function(){v.handleMarkdownPreview(this.context.composerID,this.context.targetID,this.props.config.attachmentsConfig[h.STATUS]);},_getMediaContent:function(){var ba=this.props.config.attachmentsConfig[h.MEDIA],ca=this.props.config.attachmentsConfig[h.STATUS],da;if(this.props.shouldShowCarouselPreview){var ea=ba.ComposerAttachmentPreviewContainer;da=x.createElement(ea,null);}else if(this.props.shouldShowCarouselURLInputArea){var fa=ba.ComposerPhotoCarouselUrlInputContainer;da=x.createElement(fa,{showUrlInputAreaNux:this.props.config.nuxConfig.showUrlInputAreaNux});}else if(this.props.video){da=x.createElement(t,null);if(this.state.posting)da=x.createElement('div',null,da,x.createElement(u,{progressBar:this.props.videoProgressBar}));}else da=x.createElement(m,{enableFaceboxTagger:!ba.disableFaceboxTagger,disablePhotoEditing:ba.disablePhotoEditing,mediaConfig:ba,nuxConfig:this.props.config.nuxConfig,onFilesSelected:this.props.onFilesSelected,canUploadMultiplePhotos:this.props.config.targetData.targetSupportsMultiplePhotos,uploads:this.props.uploads});var ga=x.createElement(p,{config:this.props.config,onFocus:this.props.onMentionsInputFocus,onPasteFiles:this.props.onPasteFiles,placeholder:this._getInputPlaceholder()}),ha;if(ca.showProfilePic){ha=x.createElement(n,{profilePicSrc:ca.profilePicSrc,profileURI:ca.profileURI},ga);}else ha=ga;var ia=ca.multilingualStatus,ja=ca.multilingualStatus?x.createElement(ia,null):null,ka=ca.markdownPreviewAttachment,la=null;if(ka){var ma=ka.container;la=x.createElement(ma,{prettify:ka.prettify});}var na=ca.shareInNewsFeedToggle,oa=ca.shareInNewsFeedToggle,pa=ca.shareInNewsFeedToggle?x.createElement(oa,null):null;return (x.createElement('div',null,x.createElement(k,{root:this,config:this.props.config}),ha,ja,la,x.createElement(s,null),da,pa,x.createElement(q,{additionalTaggers:this.props.additionalTaggers,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,isCameraIconEnabled:!this.props.shouldShowCarouselURLInputArea,locationTaggerPlaceholder:this._getLocationTaggerPlaceholder(),mediaAcceptParam:this.props.config.mediaAcceptParam,peopleTaggerPlaceholder:this._getPeopleTaggerPlaceholder(),postButtonModule:this.props.postButtonModule,taggersConfig:this.props.config.taggersConfig,taggersData:this.props.config.taggersData,targetData:this.props.config.targetData})));},_getLocationTaggerPlaceholder:function(){if(!!this.props.video)return y._("Where was this taken?");if(this.props.uploads.size>1)return y._("Where were these photos taken?");if(this.props.uploads.size===1)return y._("Where was this photo taken?");return null;},_getPeopleTaggerPlaceholder:function(){if(!!this.props.video||this.props.uploads.size>0)return y._("Who were you with?");return null;},_getInputPlaceholder:function(){if(!!this.props.video){return y._("Say something about this video...");}else if(this.props.uploads.size>1){return y._("Say something about these photos...");}else if(this.props.shouldShowCarouselURLInputArea||this.props.shouldShowCarouselPreview){return y._("Write something...");}else return y._("Say something about this photo...");}});f.exports=aa;},null);
__d('ReactComposerPhotoCarouselActionType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({SHOW_CAROUSEL_URL_INPUT_AREA:null,SEEN_NUX:null});},null);
__d('ReactComposerPhotoCarouselStore',['ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerPhotoCarouselActionType','ReactComposerScrapedAttachmentActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,m);o=n&&n.prototype;function p(){'use strict';var q;o.constructor.call(this,function(){return {shouldShowURLEditArea:false,seenNux:false};},function(r){switch(r.type){case k.SHOW_CAROUSEL_URL_INPUT_AREA:q&&q.$ReactComposerPhotoCarouselStore1(r);break;case h.SELECT_ATTACHMENT:q&&q.$ReactComposerPhotoCarouselStore2(r);break;case l.ATTACHMENT_SCRAPED:q&&q.$ReactComposerPhotoCarouselStore3(r);break;case k.SEEN_NUX:q&&q.$ReactComposerPhotoCarouselStore4(r);break;default:}});q=this;}p.prototype.$ReactComposerPhotoCarouselStore1=function(q){'use strict';var r=q.composerID,s=q.show,t=this.getComposerData(r);t.shouldShowURLEditArea=s;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore3=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r);s.shouldShowURLEditArea=false;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore2=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r),t=i.getSelectedAttachmentID(r);if(s.shouldShowURLEditArea&&t!==j.MEDIA)s.shouldShowURLEditArea=false;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore4=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r);s.seenNux=true;this.emitChange(r);};p.prototype.shouldShowURLEditArea=function(q){'use strict';return this.getComposerData(q).shouldShowURLEditArea;};p.prototype.seenNux=function(q){'use strict';return this.getComposerData(q).seenNux;};f.exports=new p();},null);
__d('ReactComposerVideoUploader',['ReactComposerActions','ReactComposerPostUtilsCore','ReactComposerVideoUploadActions','ReactComposerVideoUploadStore','DOM','DOMClone','ErrorDialog','React','ReactDOM','Run','SubscriptionsHandler','UserAgent','VideoUploadProcessingDialog.react','VideoUploadFile','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();function w(x){this.$ReactComposerVideoUploader1=x;this.$ReactComposerVideoUploader2=new r();!this.$ReactComposerVideoUploader1.composerID?v(0):undefined;!this.$ReactComposerVideoUploader1.container?v(0):undefined;!this.$ReactComposerVideoUploader1.progressBarInstance?v(0):undefined;!this.$ReactComposerVideoUploader1.uploader?v(0):undefined;this.$ReactComposerVideoUploader3=x.uploader;this.$ReactComposerVideoUploader4=x.composerID;this.$ReactComposerVideoUploader2.addSubscriptions(this.$ReactComposerVideoUploader3.subscribe('post-failed',this.$ReactComposerVideoUploader5.bind(this)),this.$ReactComposerVideoUploader3.subscribe('post-finished',this.$ReactComposerVideoUploader6.bind(this)),this.$ReactComposerVideoUploader3.subscribe('upload-failed',this.$ReactComposerVideoUploader7.bind(this)),this.$ReactComposerVideoUploader3.subscribe('upload-finished',this.$ReactComposerVideoUploader8.bind(this)));q.onLeave((function(){return this.$ReactComposerVideoUploader3.abandon();}).bind(this));q.onUnload((function(){return this.$ReactComposerVideoUploader3.abandon();}).bind(this));}w.prototype.upload=function(x,y){this.$ReactComposerVideoUploader9=y;var z=u.fromFileInput(x);this.$ReactComposerVideoUploader3.upload(z);};w.prototype.uploadFromFile=function(x,y){this.$ReactComposerVideoUploader9=y;this.$ReactComposerVideoUploader3.upload(x);};w.prototype.destroy=function(){this.$ReactComposerVideoUploader2.release();};w.prototype.$ReactComposerVideoUploader10=function(x){if(x)n.show(x.error_summary,x.error_description);this.$ReactComposerVideoUploader1.progressBarInstance.reset();this.$ReactComposerVideoUploader3.abandon();h.postError(this.$ReactComposerVideoUploader4,null);};w.prototype.$ReactComposerVideoUploader5=function(x,y){this.$ReactComposerVideoUploader10(y);};w.prototype.$ReactComposerVideoUploader6=function(x,y){i.handlePostSucceeded(this.$ReactComposerVideoUploader4);p.render(o.createElement(t,{videoID:y.video_id,show:true}),this.$ReactComposerVideoUploader1.container);this.$ReactComposerVideoUploader1.onPostSuccess&&this.$ReactComposerVideoUploader1.onPostSuccess();};w.prototype.$ReactComposerVideoUploader7=function(x,y){this.$ReactComposerVideoUploader10(y);var z=k.getVideo(this.$ReactComposerVideoUploader4);if(s.isBrowser('IE')){var aa=m.deepClone(z.input);l.replace(z.input,aa);}else z.input.value='';j.remove(this.$ReactComposerVideoUploader4);};w.prototype.$ReactComposerVideoUploader8=function(){this.$ReactComposerVideoUploader3.post(this.$ReactComposerVideoUploader9);this.$ReactComposerVideoUploader1.onUploadSuccess&&this.$ReactComposerVideoUploader1.onUploadSuccess();};f.exports=w;},null);
__d('ReactComposerMediaAttachmentContainer.react',['Bootloader','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerMediaAttachment.react','ReactComposerMediaStore','ReactComposerMediaUtils','ReactComposerPhotoCarouselStore','ReactComposerPhotoUploadActions','ReactComposerPhotoUploadStore','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentStore','ReactComposerStatusUtils','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerVideoUploadActions','ReactComposerVideoUploader','ReactComposerVideoUploadStore','Arbiter','React','ReactDOM','PUWMethods','curry','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha=ca.PropTypes,ia=ca.createClass({displayName:'ComposerMediaAttachmentContainer',_uploader:undefined,_videoUploader:undefined,_photoEditorSubscription:undefined,mixins:[s(m,o,q,t,w,aa)],propTypes:{additionalTaggers:ha.arrayOf(ha.shape({button:ha.element.isRequired,container:ha.element.isRequired})),config:k.isRequired},statics:{calculateState:function(ja,ka){return {createAlbumLink:m.getCreateAlbumLink(ja),shouldShowCarouselURLInputArea:o.shouldShowURLEditArea(ja),shouldShowCarouselPreview:t.getMarkup(ja)!==null,selectedTagger:w.getSelectedTagger(ja),uploads:q.getUploads(ja),video:aa.getVideo(ja),videoProgressBar:m.getVideoProgressBar(ja),videoProgressBarInstance:m.getVideoProgressBarInstance(ja),videoUploader:m.getVideoUploader(ja)};}},componentWillMount:function(){var ja=this.props.config.attachmentsConfig[j.MEDIA];this._uploader=new r(this.context,ja.photoLimit,{disableFaceRecognition:ja.disableFaceboxTagger});this._photoEditorSubscription=ba.subscribe('AttachmentsPhotoEditor/newImage'+this.context.composerID,fa(n.onImageEdited,this.context.composerID,this._uploader));},componentDidMount:function(){this._videoUploader=new z({composerID:this.context.composerID,container:da.findDOMNode(this.refs.videoContainer),progressBarInstance:this.state.videoProgressBarInstance,uploader:this.state.videoUploader});y.setUploader(this.context.composerID,this._videoUploader);},componentWillUnmount:function(){this._videoUploader&&this._videoUploader.destroy();this._photoEditorSubscription&&this._photoEditorSubscription.unsubscribe();this._photoEditorSubscription=null;},componentWillUpdate:function(ja,ka){ka=ka||{};if((this.state.uploads.size>0||!!this.state.video)&&ka.uploads.size===0&&!ka.video)i.selectAttachment(this.context.composerID,j.STATUS,true);},render:function(){return (ca.createElement('div',null,ca.createElement(l,babelHelpers._extends({},this.props,{createAlbumLink:this.state.createAlbumLink,shouldShowCarouselURLInputArea:this.state.shouldShowCarouselURLInputArea,shouldShowCarouselPreview:this.state.shouldShowCarouselPreview,onFilesSelected:this._onFilesSelected,onMentionsInputFocus:this._onMentionsInputFocus,onPasteFiles:this._onPasteFiles,postButtonModule:this.props.postButtonModule,uploads:this.state.uploads,video:this.state.video,videoProgressBar:this.state.videoProgressBar})),ca.createElement('div',{ref:'videoContainer'})));},_onFilesSelected:function(event,ja){var ka=event.target,la=this.props.config.attachmentsConfig[j.MEDIA];if(la.useVideoUploadDialog){var ma=n.getFileNamesFromFileInput(ka),na=n.hasVideos(ma),oa=n.hasAudioFiles(ma);if(ka.files&&ka.files.length===1)if(oa&&la.canUploadAudio){h.loadModules(["ComposerXAudioUploadDialogController"],(function(pa){return (pa.showDialog({targetID:this.context.targetID,fileInput:ja}));}).bind(this));return;}else if(na){h.loadModules(["ComposerXVideoUploadDialogController"],(function(pa){return (pa.showDialog({targetID:this.context.targetID,fileInput:ja,composerEntryPointRef:this.context.composerType}));}).bind(this));return;}}!this._uploader?ga(0):undefined;n.uploadPhotosOrVideoFromTarget(this.context.composerID,event.target,this._uploader,this.props.config.targetData.targetSupportsMultiplePhotos);},_onMentionsInputFocus:function(){if(this.state.selectedTagger!==null&&this.state.selectedTagger!==x.PEOPLE)v.selectTaggerWithoutAutofocus(this.context.composerID,x.PEOPLE);},_onPasteFiles:function(ja){u.uploadPastedFile(this.context.composerID,ja[0],this._uploader);p.photosSelect(this.context.composerID,1,ea.COPYPASTE);}});f.exports=ia;},null);
__d('ReactComposerVideoCopyrightDialog.react',['LayerHideOnEscape','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=j.createClass({displayName:'ReactComposerVideoCopyrightDialog',mixins:[i,k],propTypes:{shown:q.bool,onConfirm:q.func,onCancel:q.func},componentDidMount:function(){this.refs.dialog.layer.subscribe('hide',this._onHide);},renderLayers:function(){return {dialog:j.createElement(m,{ref:'dialog',shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:h}},j.createElement(n,null,p._("Please confirm that the content you are uploading does not infringe upon the intellectual property rights of any third party and that you have secured all rights necessary to copy, display and publicly perform the uploaded content (including any musical compositions or sound recordings included in the content) on Facebook.")),j.createElement(o,null,j.createElement(l,{use:'confirm',onClick:this.props.onConfirm,label:p._("Confirm")}),j.createElement(l,{onClick:this.props.onCancel,label:p._("Cancel")})))};},render:function(){return null;},_onHide:function(){this.props.onCancel&&this.props.onCancel();},_onCancel:function(){this.props.onCancel&&this.props.onCancel();}});f.exports=r;},null);
__d('ReactComposerMediaAttachmentPostButton.react',['ReactComposerConfig','ReactComposerPostButtonContainer.react','ReactComposerVideoCopyrightDialog.react','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','XUIContextualDialog.react','XUIContextualDialogBody.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes,r=l.createClass({displayName:'ReactComposerMediaAttachmentPostButton',mixins:[k,m],propTypes:{config:h.isRequired,disabled:q.bool,limitExceeded:q.bool,onClick:q.func,photoLimit:q.number.isRequired,showCopyrightDialogOnPost:q.bool},getDefaultProps:function(){return {disabled:false,limitExceeded:false,showCopyrightDialogOnPost:false};},getInitialState:function(){return {copyrightDialogShown:false};},renderLayers:function(){return {limitDialog:l.createElement(n,{alignment:'right',contextRef:(function(){return this.refs.post;}).bind(this),position:'below',shown:this.props.limitExceeded,width:300},l.createElement(o,null,p._("You can only add {number} photos at a time",[p.param('number',this.props.photoLimit)]))),copyrightDialog:l.createElement(j,{shown:this.state.copyrightDialogShown,onCancel:this._onCopyrightDialogCancel,onConfirm:this._onCopyrightDialogConfirm})};},render:function(){return (l.createElement(i,{config:this.props.config,forceDisabled:this.props.disabled,onClickPreprocess:this._onClickPreprocess,ref:'post'}));},_onClickPreprocess:function(){if(this.props.showCopyrightDialogOnPost){this.setState({copyrightDialogShown:true});return false;}if(this.props.onClick){this.props.onClick();return false;}return true;},_onCopyrightDialogCancel:function(){this.setState({copyrightDialogShown:false});},_onCopyrightDialogConfirm:function(){this.setState({copyrightDialogShown:false});this.props.onClick&&this.props.onClick();}});f.exports=r;},null);
__d('ReactComposerMediaEagerAttachment.react',['ReactComposerAttachmentType','ReactComposerAttachmentBodyMixin','ReactComposerConfig','ReactComposerMediaActions','ReactComposerMediaAttachmentContainer.react','ReactComposerStatusActions','ReactComposerTaggerActions','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=o.PropTypes,q=o.createClass({displayName:'ReactComposerMediaEagerAttachment',mixins:[i()],propTypes:{config:j.isRequired,postButtonModule:p.func.isRequired},statics:{attachmentID:h.MEDIA},componentWillMount:function(){var r=this.props.config.attachmentsConfig[h.MEDIA].bootstrapData;n.updateTaggersSource(this.context.composerID,r.taggersSource);m.setMentionsSource(this.context.composerID,r.mentionsSource);k.setConfig(this.context.composerID,r);},renderX:function(){return o.createElement(l,this.props);}});f.exports=q;},null);
__d('ReactComposerMediaPostButtonContainerMixin',['ReactComposerActions','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerConstants','ReactComposerContextMixin','ReactComposerMediaAttachmentPostButton.react','ReactComposerPhotoStore','ReactComposerPhotoUploadStore','ReactComposerPostUtils','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerVideoUploadStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=u.PropTypes,w={mixins:[l,q(n,o,r,s),t],propTypes:{config:j.isRequired,onClickPreprocess:v.func},statics:{calculateState:function(x,y,z){var aa=y.config.attachmentsConfig[i.MEDIA],ba=z.gks[k.GK_VIDEO_COPYRIGHT]&&!!s.getVideo(x);return {limitExceeded:n.isLimitExceeded(x,aa.photoLimit),disabled:p.isPostButtonDisabled(x,aa.photoLimit),showCopyrightDialogOnPost:ba};}},render:function(){var x=this.props.config.attachmentsConfig[i.MEDIA].photoLimit;return (u.createElement(m,{disabled:this.state.disabled,limitExceeded:this.state.limitExceeded,onClick:this._onClick,photoLimit:x,showCopyrightDialogOnPost:this.state.showCopyrightDialogOnPost,config:this.props.config}));},_onClick:function(){if(this.props.onClickPreprocess)if(!this.props.onClickPreprocess())return;h.postStarted(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID});}};f.exports=w;},null);
__d('ReactComposerAttachmentPreview.react',['DOMContainer.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j.PropTypes,l=j.createClass({displayName:'ReactComposerAttachmentPreview',mixins:[i],propTypes:{markup:k.instanceOf(HTMLElement).isRequired},render:function(){if(!this.props.markup)return j.createElement('noscript',null);return (j.createElement(h,null,this.props.markup));}});f.exports=l;},null);
__d('ReactComposerAttachmentPreviewContainer.react',['ReactComposerLocationAttachmentActions','ReactComposerLocationAttachmentStore','ReactComposerMinutiaeAttachmentActions','ReactComposerMinutiaeAttachmentStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerAttachmentPreview.react','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','Arbiter','DOM','Event','ReactComponentWithPureRenderMixin','React','ReactDOM','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=t.PropTypes,x=t.createClass({displayName:'ReactComposerAttachmentPreviewContainer',_buttonEvent:undefined,mixins:[s,l(o,k,i)],propTypes:{markup:w.instanceOf(HTMLElement)},statics:{calculateState:function(y,z){var aa=o.getMarkup(y),ba=k.getMarkup(y),ca=i.getMarkup(y);return {markup:aa||ba||ca};}},componentDidMount:function(){this._cleanupButtonEvent();this._setButtonEvent();},componentDidUpdate:function(){this._setButtonEvent();},componentWillUnmount:function(){this._cleanupButtonEvent();},render:function(){if(!this.state.markup)return null;return (t.createElement(m,{ref:'attachment',markup:this.state.markup}));},_setButtonEvent:function(){if(this.refs.attachment){var y=q.scry(u.findDOMNode(this.refs.attachment),"._9s")[0];if(y)this._buttonEvent=r.listen(y,'click',(function(event){n.setScrapedAttachment(this.context.composerID,null,{});j.setMarkup(this.context.composerID,null);h.setMarkup(this.context.composerID,null);this._buttonEvent&&this._buttonEvent.remove();this._buttonEvent=null;}).bind(this));p.inform('react_composer_dom_ready/'+this.context.composerID);}},_cleanupButtonEvent:function(){this._buttonEvent&&this._buttonEvent.remove();}});f.exports=x;},null);
__d('ReactComposerStatusAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerConfig','ReactComposerContextMixin','ReactComposerDragDropPromptContainer.react','ReactComposerPrefillConfig','ReactComposerProfilePhotoBlock.react','ReactComposerAttachmentPreviewContainer.react','ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react','ReactComposerStatusFooterContainer.react','ReactComposerStatusPlaceholderFooter.react','ReactComposerTaggerSummaryContainer.react','ReactComposerTaggerSummaryPlaceholder.react','React','ReactComposerStatusActions','ComposedInlineStyle','DraftModifier','EditorState','ReactInputSelection','SelectionState'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();c('ReactComposerStatusActions');c('ComposedInlineStyle');c('DraftModifier');c('EditorState');c('ReactInputSelection');c('SelectionState');var v=u.PropTypes,w=u.createClass({displayName:'ReactComposerStatusAttachment',mixins:[k],propTypes:{additionalTaggers:v.arrayOf(v.shape({button:v.element.isRequired,container:v.element.isRequired})),additionalFooterActions:v.arrayOf(v.element),bootloader:i,config:j.isRequired,isActive:v.bool,onFocus:v.func,onMentionsInputChange:v.func,onPasteFiles:v.func,onPasteRawText:v.func.isRequired,onPostIntent:v.func,placeholder:v.string.isRequired,postButtonModule:v.func,prefillConfig:m},getDefaultProps:function(){return {taggersData:{}};},componentWillMount:function(){if(this.props.isActive)setTimeout((function(){return this.refs.mentionsInput.focus();}).bind(this),0);},render:function(){var x;if(this.props.isActive){x=u.createElement(q,{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,bootloader:this.props.bootloader,config:this.props.config,mediaAcceptParam:this.props.config.mediaAcceptParam,postButtonModule:this.props.postButtonModule,prefillConfig:this.props.prefillConfig,taggersConfig:this.props.config.taggersConfig,taggersData:this.props.config.taggersData,targetData:this.props.config.targetData});}else if(!this.props.isActive&&this.props.config.showExpandedComposer)x=u.createElement(r,{config:this.props.config});var y=this.props.isActive?u.createElement(s,null):u.createElement(t,null),z=this.props.config.attachmentsConfig[h.STATUS],aa=z.multilingualStatus,ba=z.multilingualStatus&&this.props.isActive?u.createElement(aa,null):null,ca=z.markdownPreviewAttachment,da=null;if(ca&&this.props.isActive){var ea=ca.container;da=u.createElement(ea,{prettify:ca.prettify});}var fa=u.createElement(p,{config:this.props.config,onChange:this.props.onMentionsInputChange,onFocus:this.props.onFocus,onPasteFiles:this.props.onPasteFiles,onPasteRawText:this.props.onPasteRawText,onPostIntent:this.props.onPostIntent,placeholder:this.props.placeholder,prefillConfig:this.props.prefillConfig,ref:'mentionsInput'}),ga;if(z.showProfilePic){ga=u.createElement(n,{profilePicSrc:z.profilePicSrc,profileURI:z.profileURI},fa);}else ga=fa;var ha=z.shareInNewsFeedToggle,ia=z.shareInNewsFeedToggle?u.createElement(ha,null):null;return (u.createElement('div',{className:this.props.className},u.createElement(l,{root:this,config:this.props.config}),ga,u.createElement(o,null),ia,y,ba,da,x));}});f.exports=w;},null);
__d('ReactComposerStatusAttachmentContainer.react',['ReactComposerAttachmentActions','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextMixin','ReactComposerLocationAttachmentActions','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentActions','ReactComposerStatusAttachment.react','ReactComposerStatusStore','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerStatusUtils','React','URLScraper'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=v.createClass({displayName:'ReactComposerStatusAttachmentContainer',_permissiveMatch:undefined,_uploader:undefined,mixins:[l,o(i,r,t)],statics:{calculateState:function(y,z){var aa=i.isSelectedAttachmentActive(y);return {isActive:aa,taggersData:t.getTaggersData(y)};}},getDefaultProps:function(){return {taggersData:{}};},componentWillMount:function(){var y=this.props.config.attachmentsConfig[j.MEDIA];this._uploader=new n(this.context,y.photoLimit,{disableFaceRecognition:y.disableFaceboxTagger});},componentDidMount:function(){var y=this.props.config.attachmentsConfig[j.STATUS];p.enabled(this.context.composerID,y.canScrapeShare);m.enabled(this.context.composerID,y.canAttachLocation);var z=r.getMessageText(this.context.composerID);if(z)u.scrapeLink(this.context.composerID,this.context.targetID,z,this.context.composerType);},render:function(){return (v.createElement(q,babelHelpers._extends({},this.props,this.state,{onFocus:this._onFocus,onMentionsInputChange:this._onMentionsInputChange,onPasteFiles:this._onPasteFiles,onPasteRawText:this._onPasteRawText,postButtonModule:this.props.postButtonModule})));},_onFocus:function(){h.selectAttachment(this.context.composerID,j.STATUS,true);s.selectTagger(this.context.composerID,null);},_onMentionsInputChange:function(y){var z=y.getCurrentContent().getPlainText();if(!w.trigger(z))u.scrapeLink(this.context.composerID,this.context.targetID,z,this.context.composerType);},_onPasteFiles:function(y){h.selectAttachment(this.context.composerID,j.MEDIA,true);u.uploadPastedFile(this.context.composerID,y[0],this._uploader);},_onPasteRawText:function(y){u.scrapeLink(this.context.composerID,this.context.targetID,y,this.context.composerType);}});f.exports=x;},null);
__d('ReactComposerStatusEagerAttachment.react',['ReactComposerAttachmentType','ReactComposerAttachmentBodyMixin','ReactComposerConfig','ReactComposerPrefillConfig','ReactComposerStatusActions','ReactComposerStatusAttachmentContainer.react','ReactComposerTaggerActions','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=o.PropTypes,r=o.createClass({displayName:'ReactComposerStatusEagerAttachment',mixins:[i()],propTypes:{config:j.isRequired,postButtonModule:q.func.isRequired,selected:q.bool,prefillConfig:k},getDefaultProps:function(){return {placeholder:p._(["What's on your mind?","2410314a766034ea94a578161748b8ea"])};},statics:{attachmentID:h.STATUS},componentWillMount:function(){var s=this.props.config.attachmentsConfig[h.STATUS].bootstrapData;n.updateTaggersSource(this.context.composerID,s.taggersSource);l.setMentionsSource(this.context.composerID,s.mentionsSource);l.setTypeaheadReporter(this.context.composerID,s.typeaheadReporter);},renderX:function(){return o.createElement(m,this.props);}});f.exports=r;},null);
__d('ReactComposerFeedBootloader',['Bootloader'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={statusAttachment:function(j){h.loadModules(["ReactComposerStatusAttachmentContainer.react","ReactComposerFeedPostButtonContainer.react"],j);},mediaAttachment:function(j){h.loadModules(["ReactComposerMediaAttachmentContainer.react","ReactComposerFeedMediaPostButtonContainer.react"],j);},qandaAttachment:function(j){h.loadModules(["ReactComposerQAndAAttachmentContainer.react","ReactComposerFeedMediaPostButtonContainer.react"],j);}};f.exports=i;},null);
__d('ReactComposerFeedMediaPostButtonContainer.react',['ReactComposerContextMixin','ReactComposerFeedStore','ReactComposerMediaPostButtonContainerMixin','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=k.createClass({displayName:'ReactComposerFeedMediaPostButtonContainer',mixins:[h,j],componentDidMount:function(){i.registerComposerID(this.context.composerID);}});f.exports=l;},null);
__d('ReactComposerFeedPostButtonContainer.react',['ReactComposerContextMixin','ReactComposerFeedStore','ReactComposerPostButtonContainerMixin','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=k.createClass({displayName:'ReactComposerFeedPostButtonContainer',mixins:[h,j],componentDidMount:function(){i.registerComposerID(this.context.composerID);}});f.exports=l;},null);
__d('ReactComposerHeader.react',['ReactComposerHeaderCore.react','ReactComposerHeaderProps','ReactComposerMinutiaeAttachmentStore','ReactComposerLocationAttachmentStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentStore','ReactComposerStore','CurrentUser','Image.react','ReactComponentWithPureRenderMixin','React','TooltipLink.react','cx','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=r.createClass({displayName:'ReactComposerHeader',mixins:[q,l(n,m,j,k)],propTypes:i.propTypes,getDefaultProps:i.getDefaultProps,statics:{calculateState:function(x,y){var z=m.isScraping(x)||j.isFetching(x)||k.isFetching(x);return {posting:n.isPosting(x),isFetching:z};}},render:function(){var x=this.props.forceThrobber||this.state.posting||this.state.isFetching,y=o.isEmployee()?r.createElement(s,{className:"_48-0 uiHelpLink",href:'/groups/555631037818849/',tooltip:'Provide feedback on the React Composer (fb-only).',target:'_blank'}):null;return (r.createElement(h,babelHelpers._extends({className:v(this.props.className,r.Children.count(this.props.attachmentSelectors)>3?"_36bb":'')},this.props),r.createElement(p,{className:"_4d6i"+(x?' '+"_du_":''),src:u('/images/loaders/indicator_blue_small.gif')}),this.props.rightChild,y));}});f.exports=w;},null);
__d('ReactFeedComposerX.react',['ReactComposer.react','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerBodyContainer.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerEvents','ReactComposerFeedBootloader','ReactComposerFeedMediaPostButtonContainer.react','ReactComposerFeedPostButtonContainer.react','ReactComposerHeader.react','ReactComposerInstantMediaAttachmentSelectorContainer.react','ReactComposerMediaAttachmentSelector.react','ReactComposerMediaEagerAttachment.react','ReactComposerNotesAttachmentSelector.react','ReactComposerPrefillConfig','ReactComposerQAndAAttachmentSelector.react','ReactComposerQAndALazyAttachment.react','ReactComposerStatusAttachmentSelector.react','ReactComposerStatusEagerAttachment.react','Arbiter','DOMContainer.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha=ea.createClass({displayName:'ReactFeedComposerX',mixins:[n],propTypes:{contextConfig:m.isRequired,config:l.isRequired,prefillConfig:x},componentDidMount:function(){var ia=this.props.prefillConfig;if(ia&&ia.selectedAttachment){i.selectAttachment(this.props.contextConfig.composerID,ia.selectedAttachment,ia.shouldActivateSelectedAttachment);if(ia.shouldActivateSelectedAttachment)ca.inform(o.ACTIVATE_ATTACHMENT,{composerID:this.props.contextConfig.composerID});}},render:function(){var ia=this.props.prefillConfig,ja=ia&&ia.selectedAttachment?ia.selectedAttachment:j.STATUS,ka=this._getAdditionalAttachmentComponents(ja),la=ka[0],ma=ka[1];return (ea.createElement(h,{className:"_5n2b",loggingConfig:this.props.config.loggingConfig},ea.createElement(s,{attachmentSelectors:[ea.createElement(aa,{label:ga._(["Update Status","155d6cd2b97f05fd0d45ff038fb8f47d"])}),la],showDelimiter:true}),ea.createElement(k,{expanded:this.props.config.showExpandedComposer},ea.createElement(ba,{config:this.props.config,prefillConfig:ia,selected:ja===j.STATUS,postButtonModule:r}),ma)));},_getAdditionalAttachmentComponents:function(ia){var ja=this.props.config.attachmentsConfig,ka=[],la=[],ma=ja[j.ALBUM].enabled,na=ja[j.NOTES].enabled,oa=ja[j.QANDA].enabled;ka.push(this._getMediaAttachmentSelector());la.push(ea.createElement(v,{key:'media',config:this.props.config,postButtonModule:q,selected:ia===j.MEDIA}));if(ma)ka.push(ea.createElement(da,{key:'album',display:'block'},ja[j.ALBUM].createAlbumLink));if(na)ka.push(ea.createElement(w,{key:'notes'}));if(oa){ka.push(ea.createElement(y,{key:'qanda'}));la.push(ea.createElement(z,{key:'qanda',config:this.props.config,bootloader:p}));}return [ka,la];},_getMediaAttachmentSelector:function(){var ia=this.props.config.attachmentsConfig[j.MEDIA];if(ia.openFileBrowserImmediately)return (ea.createElement(t,{key:'media',disableFaceRecognition:ia.disableFaceboxTagger,mediaAcceptParam:this.props.config.mediaAcceptParam,photoLimit:ia.photoLimit,prefillConfig:this.props.prefillConfig,targetData:this.props.config.targetData}));return (ea.createElement(u,{key:'media',label:ga._("Add Photos\/Video")}));}});f.exports=ha;},null);
__d('ReactFeedComposerXBootloader',['ReactComposerAttachmentType','ReactComposerInit','ReactFeedComposerX.react','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','ReactInputSelection','SubscriptionsHandler','XReactComposerLoggingODSController','$','csx','getActiveElement'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w,x={bootload:function(y,z){var aa=t('pagelet_composer'),ba=o.find(aa,"._559p"),ca=n.hasClass(ba,'async_saving');if(ca){w=new r();w.addSubscriptions(p.listen(ba,'success',(function(){this._bootloadImpl(y,aa,z);}).bind(this)),p.listen(ba,'error',(function(){this._bootloadImpl(y,aa,z);}).bind(this)));}else this._bootloadImpl(y,aa,z);},_bootloadImpl:function(y,z,aa){aa.config.audienceXHP=this._getAudienceSelector(z);aa.prefillConfig=Object.assign(aa.prefillConfig,this._appendPrefillConfig(z));i.init(j,aa,z);var ba=s.getURIBuilder().setString('event','bootload_done').setEnum('composer_type',m.FEEDX).getURI();new l(ba).send();w&&w.release();k.inform('ReactFeedComposerXBootloader/bootload/'+y);},_appendPrefillConfig:function(y){var z=o.find(y,"._3en1"),aa=v()==z,ba=o.find(y,"._21h8").getAttribute('data-attachment-type');if(ba===h.NOTES)ba=null;var ca=o.find(y,"._21h7"),da=o.scry(ca,'input[name="composer_photo[]"]')[0];return {mentionsInput:{text:z.value,selection:q.getSelection(z)},instantMediaSelector:{fileInputDOM:da},selectedAttachment:ba,shouldActivateSelectedAttachment:aa};},_getAudienceSelector:function(y){var z=o.find(y,"._ej0"),aa=z.cloneNode(true);z.parentNode.replaceChild(aa,z);return z;}};f.exports=x;},null);